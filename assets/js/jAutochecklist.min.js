(function($,E,F,G){'use strict';var H='jAutochecklist';var I=false;var J;var K;var L=(function(a){return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))})(navigator.userAgent||navigator.vendor||F.opera);if(!String.prototype.format){String.prototype.format=function(){var c=arguments;return this.replace(/{(\d+)}/g,function(a,b){return c[b]!==G?c[b]:a})}}$(F).on('mouseup.'+H,function(){I=false});var M={init:function(v){var w=$.extend(true,{absolutePosition:false,allowDeselectSingleList:true,arrow:true,checkbox:false,defaultFallbackValue:'',dynamicPosition:false,fallback:false,firstItemSelectAll:false,inline:false,listWidth:null,listMaxHeight:null,multiple:true,openOnHover:false,showValue:false,uniqueValue:false,width:200,popup:true,popupLogoAsValue:false,popupGroupValue:false,popupMaxItem:10,popupSizeDelta:100,textAllSelected:'All',textEmpty:'Please select...',textMoreItem:'and {0} more...',textNoResult:'No result found...',textSearch:'Type something...',collapseGroup:false,selectorGroup:'group',selectorChild:'child',groupType:0,onClose:null,onInit:null,onItemClick:null,onOpen:null,onRemoveAll:null,remote:{cache:true,delay:0,loadMoreOnScroll:false,minLength:0,source:null,fnPredict:null,fnQuery:null},menuStyle:{search:true,fixedPosition:false,fixedPositionContainer:'window',fixedPositionOffsetTop:20,scrollSpyContainer:'window',scrollSpyAnimationDuration:500,scrollSpyOffsetTop:20,onScrollSpyActivate:null}},v);return this.each(function(){var a=$(this);var b=a.data(H);var c=this.id;var d=this.className;var e=a.is('select');if(!a.is('ul')&&!e)return;if(b)return;var f=$.extend(true,{},w);var g=a.data('json');if(g){f=$.extend(true,f,g)}if(e)f.multiple=this.multiple;if(!f.multiple){f.popup=false;f.firstItemSelectAll=false}var h=a.hasClass('menu-style');if(h)f.inline=true;if(f.inline){f.popup=false;f.arrow=false}var i=$('<div>').attr({'class':H+'_wrapper','tabindex':0}).width(f.width).append(('<div class="{0}_popup"></div>'+'<div class="{0}_dropdown_wrapper">'+'<div class="{0}_arrow"><div></div></div>'+'<div class="{0}_dropdown"><div class="{0}_result"></div><input class="{0}_prediction" /><input class="{0}_input" placeholder="{1}" /><div class="{0}_remove_all"></div></div></div>'+'<ul class="{0}_list"></ul>').format(H,f.textSearch));if(d)i.addClass(d);if(f.inline)i.addClass(H+'_inline');if(c)i.attr('id',H+'_wrapper_'+c);if(!a.hasClass(H))a.addClass(H);var j=i.find('div.'+H+'_popup').width(f.width+f.popupSizeDelta-12).css({marginLeft:-f.popupSizeDelta/2});var k=i.find('div.'+H+'_dropdown');var l=i.find('div.'+H+'_result');var m=i.find('input.'+H+'_input');var n=i.find('input.'+H+'_prediction');var o=i.find('div.'+H+'_arrow');var p=i.find('ul.'+H+'_list');var q=i.find('div.'+H+'_remove_all');if(f.listWidth)p.width(f.listWidth*1-2);if(f.listMaxHeight)p.css({maxHeight:f.listMaxHeight+'px'});if(!f.menuStyle.search&&h)i.find('div.'+H+'_dropdown_wrapper').remove();if(!f.popup){j.remove();j=null}if(!f.arrow){o.remove();q.css({right:5})}if(f.inline){l.remove();l=null}var r;if(a.is('ul')){g=M._buildFromUl(a,f);r=a.data('name')}else{g=M._buildFromSelect(a,f);r=this.name.replace(/^\s+|\s+$/g,'')||a.data('name');if(f.multiple&&r&&r.indexOf('[]',r.length-2)!==-1)r=r.slice(0,-2);this.removeAttribute('name');a.data('name',r)}var s=M._buildItemFromJSON(g,f,r);var t=M._insertList(p,s,f,false,false);var u={popup:j,wrapper:i,dropdown:k,result:l,input:m,arrow:o,prediction:n,selectAll:t.selectAll,removeAll:q,list:p,listItem:{li:t.li,checkbox:t.checkbox}};b={elements:u,settings:f};a.data(H,b);a.after(i);a.hide();M._registerEvent(a);M._postProcessing(a);if(f.onInit)f.onInit()})},destroy:function(){return this.each(function(){var b=$(this);var c=b.data(H);if(!c)return;$(E).add(F).off('.'+H);c.elements.wrapper.remove();var d;if(b.is('ul')){d=b.children('li');c.elements.listItem.li.each(function(k,v){var a=$(this);d.eq(k).data('selected',a.hasClass('selected'))})}else{d=b.find('option,optgroup');c.elements.listItem.li.each(function(k,v){var a=$(this);d.eq(k).attr('selected',a.hasClass('selected'))})}b.removeData(H).show()})},selectAll:function(){return this.each(function(){M._selectAll($(this),true)})},deselectAll:function(){return this.each(function(){M._selectAll($(this),false)})},open:function(){return this.each(function(){M._open($(this))})},close:function(){return this.each(function(){M._close($(this))})},update:function(){return this.each(function(){M._update($(this))})},count:function(){return M._count(this)},get:function(){return M._get(this)},getAll:function(){return M._getAll($(this))},getText:function(){return M._getText(this)},set:function(a,b){if(b===G)b=false;if(!(a instanceof Array))a=[a];for(var i=0;i<a.length;i++)a[i]=a[i].toString();return this.each(function(){M._set($(this),a,b)})},unset:function(a){for(var i=0;i<a.length;i++)a[i]=a[i].toString();return this.each(function(){M._unset($(this),a)})},disable:function(){return this.each(function(){var a=$(this).data(H);if(!a)return;a.elements.wrapper.addClass(H+'_disabled')})},enable:function(){return this.each(function(){var a=$(this).data(H);if(!a)return;a.elements.wrapper.removeClass(H+'_disabled')})},settings:function(c){return this.each(function(){var a=$(this);var b=a.data(H);if(!b)return;b.settings=$.extend(true,b.settings,c);a.data(H,b)})},refresh:function(){return this.each(function(){var a=$(this);var b=a.data(H);if(!b)return;var c;if(settings.firstItemSelectAll)c=ul.children(':first').addClass(H+'_checkall');var d=ul.children();b.elements.listItem={li:d,checkbox:d.children('input.'+H+'_listItem_input')};b.elements.selectAll=c;a.data(H,b)})},buildFromJSON:function(a,b,c){if(b===G)b=true;if(c===G)c=false;return this.each(function(){M._buildFromJSON($(this),a,b,c)})},releaseDrag:function(){I=false},_buildFromJSON:function(a,b,c,d){var e=a.data(H);if(!e)return;if(typeof b!=='object')b=$.parseJSON(b);if(b instanceof Array){if(b.length&&typeof b[0]!=='object'){var f=[];for(var i=0;i<b.length;i++){f.push({html:b[i],val:i})}b=f}}else{var f=[];for(var i in b){f.push({html:b[i],val:i})}b=f}var g=e.elements;var h=e.settings;var j=M._buildItemFromJSON(b||[],h,a.data('name'));var k=M._insertList(g.list,j,h,c,d,g.mobile_popup);e.elements.listItem={li:k.li,checkbox:k.checkbox};e.elements.selectAll=k.selectAll;a.data(H,e);M._postProcessing(a)},_registerEvent:function(n){var o=n.data(H);var p=o.settings;var q=o.elements;var r=q.wrapper;var s=q.dropdown;var t=q.input;var u=q.prediction;var w=q.list;var x=q.listItem.checkbox;var y=q.removeAll;var z=q.popup;var A=q.arrow;var B=false;var C;A.on('mousedown.'+H,function(){if(!w.is(':hidden')){M._close(n);return false}});t.on('keydown.'+H,function(e){var v=u.val();u.val(null);if(e.keyCode===9&&v&&this.value!==v){this.value=v;return false}if(e.keyCode===27){if(p.absolutePosition){var e=$.Event("keydown");e.keyCode=27;$('div.'+H+'_dummy').trigger(e)}M._close(n)}}).on('keyup.'+H,function(e){var d=$(this);var f=this.value;var g=true;var h=p.remote;w.children('li.'+H+'_noresult').remove();u.val(f);if(r.hasClass('menu-style')){if(f)y.show();else y.hide()}if(h.source||h.fnQuery){var j=d.data('remote');if(!j||j[f]===G){clearTimeout(C);C=setTimeout(function(){if(h.fnPredict)h.fnPredict(f,u,M._predict);M._fetchData(n,f,0);if(!h.fnPredict)M._setPredictionFromLocalSource(n)},h.delay);return}else{var k=j[f];if(k&&k.length){M._buildFromJSON(n,k);g=false}}}else{var l=w.children('li');if(f===''){l.show();g=false;if(p.collapseGroup)M._collapseGroup(n)}else{w.children('li.'+H+'_checkall').hide();var m=new RegExp(f,'i');l.each(function(){var a=$(this);var b=a.text();if(m.test(b)){a.show();g=false;var c=M._getParents(a,p.selectorChild,p.selectorGroup);for(var i=0;i<c.length;i++)c[i].show()}else a.hide()})}M._setPredictionFromLocalSource(n)}if(g&&!r.hasClass('menu-style')){u.val(null);w.append('<li class="{0}_noresult">{1}</li>'.format(H,p.textNoResult))}}).on('focusin.'+H,function(e){e.stopPropagation()});if(z){s.on('mouseover.'+H,function(){clearTimeout(z.data('timeout'));var a=setTimeout(function(){if(M._count(n)&&!r.hasClass(H+'_disabled'))z.fadeIn()},200);z.data('timeout',a)});s.add(z).on('mouseout.'+H,function(){if(w.is(':hidden')){clearTimeout(z.data('timeout'));var a=setTimeout(function(){z.hide()},200);z.data('timeout',a)}});z.on('mouseover.'+H,function(){clearTimeout(z.data('timeout'))}).on('click.'+H,'div',function(){var c=$(this);if(c.hasClass('stack'))return;if(p.popupGroupValue){c.children('div.stack').remove();var d=c.text();w.children('li.selected').each(function(){var a=$(this);var b=a.children('input.'+H+'_listItem_input');var v=p.showValue?b.val():a.text();if(d===v){b.prop('checked',false);a.removeClass('selected')}})}else{var e=this.className.replace(H+'_popup_item_','');w.find('input.'+H+'_input'+e).parent('li').trigger('mousedown').trigger('mouseup')}M._update(n)})}w.on('click.'+H,'input.'+H+'_listItem_input',function(e){e.preventDefault()}).on('mousedown.'+H,'li.'+H+'_listItem',function(e){var a=$(this);if(a.hasClass('locked')||a.hasClass('blocked')||r.hasClass('menu-style'))return false;var b;if(F.getSelection)b=F.getSelection().toString();else if(E.getSelection)b=E.getSelection();else if(E.selection)b=E.selection.createRange().text;if(b)return false;e.stopPropagation();var c=a.hasClass('selected');if(c&&!p.multiple&&!p.allowDeselectSingleList)return false;if(!I)J=[];J.push(a);if(I&&K===c)return false;var d=a.children('input.'+H+'_listItem_input');var f=[];x.filter(':checked').each(function(){f.push(this.value)});c=!c;if(a.hasClass(H+'_checkall')){if(n.triggerHandler('change')===false)return false;if(p.onItemClick){if(p.onItemClick(null,a,f,M._getAll(n),c)===false){I=false;return false}}M._selectAll(n,c)}else{if(!p.multiple&&a.hasClass(p.selectorGroup))return false;var g=M._getGroupType(a,p);var h=[];var i;if(a.hasClass(p.selectorGroup)&&g!==2&&g!==3&&g!==4){var j=M._getChildren(a,p.selectorChild,G,true);for(i=0;i<j.length;i++)h.push(j[i].children('input.'+H+'_listItem_input'))}h.push(d);for(i=0;i<h.length;i++){if(h[i].prop('checked')===c)h[i]=null;else h[i].prop('checked',c)}if(n.triggerHandler('change')===false)return false;if(p.onItemClick){if(p.onItemClick(d.prop('value'),a,f,M._get(n),c)===false){for(var i=0;i<h.length;i++){if(h[i])h[i].prop('checked',!c)}I=false;return false}}M._update(n)}if(!I&&p.multiple){I=true;K=c}}).on('mouseup.'+H,'li.'+H+'_listItem',function(e){if(!p.multiple){setTimeout(function(){M._close(n)},100)}}).on('mouseenter.'+H,'li.'+H+'_listItem',function(){if(!I)return;var a=$(this);var b=false;for(var i=0;i<J.length;i++){if(a.is(J[i])){b=true;break}}if(!b)$(this).trigger('mousedown')}).on('click.'+H,'a',function(e){e.stopPropagation();var b=$(this);var c=b.attr('href');var d=p.menuStyle;if(/^#/.test(b.attr('href'))){var f=d.scrollSpyContainer;if(f==='window')f='body';var g=$(c);if(!g.length)return false;var h=$(c).offset().top;if(f!=='body')h+=$(f).scrollTop();f=$(f);f.animate({scrollTop:h-f.offset().top+parseInt(f.css('marginTop'))-d.scrollSpyOffsetTop},d.scrollSpyAnimationDuration,function(){setTimeout(function(){var a=b.closest('li.'+H+'_listItem');a.closest('ul').children('li.selected').removeClass('selected');a.addClass('selected')})});return false}}).on('mousedown.'+H,'a',function(e){e.stopPropagation();return false}).on('scroll.'+H,function(){if(!p.remote.loadMoreOnScroll)return;var a=$(this);if(a.height()+5<(a.get(0).scrollHeight-a.scrollTop()))return;var b=t.val();var c=a.children('li').length;M._fetchData(n,b,c)}).on('mousedown.'+H,'div.'+H+'_expandable',function(){var a=$(this);var b=a.parent();if(a.hasClass('expanded'))M._collapse(b,p);else M._expand(b,p);return false});r.on('focusin.'+H,function(){if(w.is(':hidden'))M._open(n);if(!L)setTimeout(function(){t.focus()})}).on('focusout.'+H,function(){setTimeout(function(){if(!$(E.activeElement).closest(r).length)M._close(n)},10)}).on('keydown.'+H,function(e){var a=e.keyCode;var b=w.children('li');var c=b.filter('li.over');var d;if(a===40||a===38){if(r.hasClass('menu-style'))return;if(a===40)d=c.length?c.last().next():b.first();else d=c.length?c.first().prev():null;if(d&&d.length){if(!B){c.removeClass('over')}d.addClass('over');if(a===40&&d.position().top+d.height()>w.height())w.scrollTop(w.scrollTop()+50);else if(a===38&&d.position().top<0)w.scrollTop(w.scrollTop()-50)}}else if(a===13){if(r.hasClass('menu-style'))return;if(!c.length)b.filter(':visible').first().trigger('mousedown').trigger('mouseup');else c.trigger('mousedown').trigger('mouseup');t.val(null);return false}else if(a===16){B=true}}).on('keyup.'+H,function(e){var a=e.keyCode;if(a===16)B=false}).on('mouseup.'+H,function(e){I=false;e.stopPropagation()}).on('mousedown.'+H,function(e){e.stopPropagation()});y.on('mousedown.'+H,function(){if(p.onRemoveAll){if(p.onRemoveAll($(this),M._get(n))===false)return false}t.val(null).trigger('keyup');if(!r.hasClass('menu-style'))M._selectAll(n,false);return false});if(p.openOnHover){var D;r.on('mouseenter.'+H,function(e){clearTimeout(D);M._open(n)}).on('mouseleave.'+H,function(e){D=setTimeout(function(){M._close(n)},500)})}},_fetchData:function(c,d,e){var f=c.data(H);var g=f.settings;var h=g.remote;var i=f.elements.input;if(d.length<h.minLength)return;if(h.fnQuery)h.fnQuery(c,d,e,M._buildFromJSON);else{$.getJSON(h.source,{text:d,offset:e},function(a){if(!a)a=[];M._buildFromJSON(c,a,true,e>0);if(h.cache&&!e){var b=i.data('remote')||[];b[d]=a;i.data('remote',b)}})}},_postProcessing:function(a){var b=a.data(H);var c=b.elements;var d=c.wrapper;var e=c.list;var f=b.settings;e.find('a,button,:input,object').attr('tabIndex',-1);var g=d.offset();var i=d.height();var x=g.left-$(F).scrollLeft();var y=g.top-$(F).scrollTop()+i;var w=e.width()+2;var h=e.height()+2;var j=$(F).width();var k=$(F).height();if(x+w>j){var l=-(j-x);if(l>=0)e.css({left:l})}if(f.dynamicPosition&&y+h>k){var m=-h-i-1;if(m)e.css({top:-h-i-1})}if(f.inline)d.css({minHeight:d.outerHeight()});c.removeAll.hide();if(d.hasClass('menu-style')){M._registerMenuStyle(a);M._collapseGroup(a)}else if(f.collapseGroup)M._collapseGroup(a);M._update(a)},_selectAll:function(a,b){var c=a.data(H);if(!c)return;c.elements.listItem.li.not('li.locked').children('input.'+H+'_listItem_input').prop('checked',b);this._update(a)},_update:function(g){var h=g.data(H);if(!h)return;var j=h.settings;var k=h.elements.listItem.li;var l=[];var m=0;var n=true;var o=0;var p='';k.each(function(){var a=$(this);if(a.hasClass(H+'_checkall'))return;if(a.hasClass(j.selectorGroup))M._updateParent(a,j);var b=a.children('input.'+H+'_listItem_input');if(!b.length)return;if(b.prop('checked')){var v=b.val();var c=j.showValue&&v!==''?v:a.text();if(j.popupLogoAsValue)c=a.find('img.logo').attr('src');if(j.popup){var d=c;if(m>=j.popupMaxItem)o++;else{var e=b.attr('class').match(/input(\d+)/);if(j.popupLogoAsValue)d='<img class="logo" src="{0}" />'.format(d);var f=H+'_popup_item_'+e[1];if(a.hasClass('locked'))f+=' locked';p+='<div class="{0}">{1}</div>'.format(f,d)}}a.addClass('selected');l.push(c);m++}else{a.removeClass('selected');n=false}});if(j.uniqueValue){k.not('li.selected').each(function(){var a=$(this);var v=j.showValue?a.children('input.'+H+'_listItem_input').val():a.text();if(j.popupLogoAsValue)v=a.find('img.logo').attr('src');if($.inArray(v,l)!==-1)a.addClass('blocked');else a.removeClass('blocked')})}if(h.elements.selectAll){if(n)h.elements.selectAll.addClass('selected');else{h.elements.selectAll.removeClass('selected')}}if(j.popup){if(j.popupGroupValue){p='';o=0;m=0;var q=M._getUniqueArray(l);for(var i=0;i<q.length;i++){var v=q[i];var c=l.filter(function(x){return x===v}).length;if(m>=j.popupMaxItem)o++;else{if(j.popupLogoAsValue){v='<img class="logo" src="{0}" />'.format(v)}p+='<div>';if(c>1){p+='<div class="stack">'+c+'</div>'}p+=v+'</div>'}m++}}if(o)p+='<div class="{0}_more">'.format(H)+j.textMoreItem.format(o)+'</div>';h.elements.popup.html(p)}var r;if(l.length){r=j.textAllSelected&&j.multiple&&n&&m>1?j.textAllSelected:l.join(', ');if(j.multiple||j.allowDeselectSingleList)h.elements.removeAll.show()}else{r='<span class="{0}_placeholder">{1}</span>'.format(H,h.settings.textEmpty);h.elements.removeAll.hide()}if(h.elements.result)h.elements.result.html(r)},_eventExist:function(a,b){var c=$._data(a.get(0),'events');if(c&&c[b]!==G){for(var i=0;i<c[b].length;i++){if(c[b][i].namespace===H)return true}}return false},_open:function(b){var c=b.data(H);if(!c)return;var d=c.elements;var e=d.wrapper;var f=c.settings;if(e.hasClass(H+'_disabled'))return;var g=d.list;if(!d.list.is(':hidden'))return;var h=M._get(b);if(f.onOpen){if(f.onOpen(h)===false)return}if(d.result)d.result.hide();d.input.show();if(f.remote.source||f.remote.fnQuery)d.input.trigger('keyup');d.prediction.show();e.addClass(H+'_active');if(c.settings.absolutePosition){var i=e.offset();var j=$('<div></div>').attr('class',H+'_dummy '+H+'_wrapper').width(e.width()).height(e.height());b.after(j);e.addClass(H+'_absolute').appendTo('body').css({top:i.top+3,left:i.left});var k=$(E);if(!M._eventExist(k,'mousedown')){k.on('mousedown.'+H,function(){$('ul.'+H+', select.'+H).jAutochecklist('close')})}var l=$(F);if(!M._eventExist(l,'resize')){l.on('resize.'+H,function(){var a=b.next();if(a.hasClass(H+'_dummy')){i=a.offset();e.css({top:i.top+3,left:i.left})}})}}g.fadeIn();if(d.popup)d.popup.fadeIn();if(!L){d.input.focus()}b.data('value',h);b.triggerHandler('focus');$('ul.'+H+', select.'+H).not(b).jAutochecklist('close')},_close:function(a){var b=a.data(H);if(!b)return;var c=b.elements;if(c.list.is(':hidden'))return;var d=c.wrapper;var e=b.settings;if(a.triggerHandler('blur')===false)return;if(e.onClose){var f=M._get(a);var g=a.data('value');if(e.onClose(f,g,f<g||g<f)===false)return}if(c.popup)c.popup.hide();if(c.result)c.result.show();c.input.hide().val(null);c.prediction.hide().val(null);c.list.hide().children('li.'+H+'_noresult').remove();c.listItem.li.show().filter('li.over').removeClass('over');d.removeClass(H+'_active');if(e.collapseGroup)M._collapseGroup(a);if(e.absolutePosition){d.css({top:0,left:0}).removeClass(H+'_absolute');var h=a.next();if(h.hasClass(H+'_dummy'))h.replaceWith(d)}I=false},_count:function(a){var b=a.data(H);if(!b)return 0;return b.elements.listItem.checkbox.filter(':checked').length},_get:function(a){var b=a.data(H);if(!b)return[];var c=[];b.elements.listItem.checkbox.filter(':checked').each(function(){c.push(this.value)});if(!b.settings.multiple)return c[0]===G?null:c[0];return c},_getAll:function(a){var b=a.data(H);if(!b)return[];var c=[];b.elements.listItem.checkbox.each(function(){c.push(this.value)});return c},_getText:function(a){var b=a.data(H);if(!b)return[];var c=[];b.elements.listItem.li.filter('li.selected').each(function(){c.push($(this).text());if(!b.settings.multiple)return false});if(!b.settings.multiple)return c[0]===G?'':c[0];return c},_set:function(a,b,c){var d=a.data(H);if(!d)return;if(c)M._selectAll(a,false);d.elements.listItem.checkbox.each(function(){if(b.indexOf(this.value)!==-1)this.checked=true});M._update(a)},_unset:function(a,b){var c=a.data(H);if(!c)return;c.elements.listItem.checkbox.each(function(){if(b.indexOf(this.value)!==-1)this.checked=false});M._update(a)},_getLevel:function(a){var b=a.attr('class').match(/level(\d+)/);return b?parseInt(b[1]):null},_getChildren:function(a,b,c,d){if(c===G)c=M._getLevel(a);var e=a.next();if(d&&e.hasClass('locked'))e=e.next();if(!e.length)return[];var f=M._getLevel(e);if(f<c||(f===c&&(!e.hasClass(b))))e=null;return e?[e].concat(M._getChildren(e,b,c,d)):[]},_getDirectChildren:function(a,b,c,d){var e=M._getLevel(a);var f=M._getChildren(a,b,e,d);var g=[];for(var i=0;i<f.length;i++){var h=f[i];var j=M._getLevel(h);if(h.hasClass(b)&&j===e)g.push(h);else if(h.hasClass(c)&&j===(e+1)){g.push(h)}}return g},_getParents:function(a,b,c){var d=a.hasClass(c);var e=a.hasClass(b);if(!e&&!d)return[];var f=M._getLevel(a);if(d){if(a.hasClass('level1'))return[];f--}var g=a.prevAll('li.'+c+'.level'+f+':first');return g?[g].concat(M._getParents(g,b,c)):[]},_updateParent:function(a,b){var c=M._getGroupType(a,b);if(c===2||c===5)return;var d=M._getChildren(a,b.selectorChild);var e;var f=a.children('input.'+H+'_listItem_input');if(c===0||c===3){e=true;for(var i=0;i<d.length;i++){if(d[i].children('input.'+H+'_listItem_input').prop('checked')===false){e=false;break}}}else if(c===1||c===4){e=false;for(var i=0;i<d.length;i++){if(d[i].children('input.'+H+'_listItem_input').prop('checked')===true){e=true;break}}}if(e)a.addClass('selected');else if(c!==3&&c!==4)a.removeClass('selected');if(c!==3&&c!==4)f.prop('checked',e);else if(e)f.prop('checked',true)},_getGroupType:function(a,b){var c=b.groupType;if(a.hasClass('groupType0'))c=0;else if(a.hasClass('groupType1'))c=1;else if(a.hasClass('groupType2'))c=2;else if(a.hasClass('groupType3'))c=3;else if(a.hasClass('groupType4'))c=4;else if(a.hasClass('groupType5'))c=5;return c},_buildFromUl:function(f,g){var h=[];var i=null;f.children().each(function(){var t=$(this);var a=this.className||'';var b=t.data('locked');var c=t.hasClass(g.selectorGroup);var d=t.hasClass(g.selectorChild);var e;if(a)e=M._getLevel(t);if(!e&&d)e=1;if(i&&e>=i)b=true;if(c&&b&&i===null)i=e||1;h.push({className:a,groupType:t.data('grouptype'),html:t.html(),isChild:d,isGroup:c,level:e,locked:b,selected:t.data('selected'),val:t.data('value')||''})});return h},_buildFromSelect:function(b,c){var d=[];b.children().each(function(){var t=$(this);if(t.is('optgroup')){var a=t.data('locked')||this.disabled;d.push({className:(this.className||'')+' '+c.selectorGroup,groupType:t.data('grouptype'),html:this.label,isChild:false,isGroup:true,level:null,locked:a,selected:false,style:this.getAttribute('style'),val:null});t.children().each(function(){d.push({className:(this.className||'')+' '+c.selectorChild,groupType:0,html:this.innerHTML,isChild:true,isGroup:false,level:null,locked:a||t.data('locked')||this.disabled,selected:this.selected&&this.hasAttribute('selected'),style:this.getAttribute('style'),val:this.hasAttribute('value')?this.value:''})})}else{d.push({className:this.className||'',groupType:0,html:this.innerHTML,isChild:false,isGroup:false,level:null,locked:t.data('locked'),selected:this.selected&&this.hasAttribute('selected'),style:this.getAttribute('style'),val:this.hasAttribute('value')?this.value:''})}});return d},_buildItemFromJSON:function(a,b,c){if(!c)c=H;var d='';var f=b.multiple?'checkbox':'radio';var g=0;for(var i=0;i<a.length;i++){var e=a[i];var h=(e.val===''||e.val===G||e.val===null)?'':e.val;var j=(e.className?e.className+' ':'')+H+'_listItem';var k=e.isGroup||false;var l=e.isChild||false;if(e.groupType!==G)j+=' groupType'+e.groupType;if(e.locked)j+=' locked';var m=5;if(e.level&&e.level>1){m+=(e.level-1)*20;j+=' level'+e.level}else if(k||l)j+=' level1';var o=e.style?[e.style]:[];if(k){if(h===''){j+=' '+H+'_listItem_group_empty ';if(b.checkbox)m+=15}}else if(l){j+=' '+H+'_listItem_child';m+=20;if(b.checkbox)m+=15;if(b.collapseGroup)m+=18}if(m>5){o.push((b.inline?'padding-left:':'margin-left:')+m+'px')}o=o.length?'style="'+o.join(';')+'"':'';d+='<li class="{0}" {1}>'.format(j,o);if(!b.multiple&&!g&&c.indexOf('[]',c.length-2)===-1)d+='<input type="hidden" name="{0}" value="{1}" />'.format(c,b.defaultFallbackValue);if(k&&b.collapseGroup)d+='<div class="{0}_expandable"></div>'.format(H);if((!k||h!=='')&&(!b.firstItemSelectAll||i>0)){var n=c;if(b.multiple){if(b.fallback){n+='['+g+']';d+='<input type="hidden" name="{0}" value="{1}" />'.format(n,b.defaultFallbackValue)}else n+='[]'}d+='<input type="{0}" name="{1}" value="{2}" class="{3}_listItem_input {3}_input{5}" {4} />'.format(f,n,h,H,e.selected?'checked':'',g++)}d+=e.html+'</li>'}return d},_insertList:function(a,b,c,d,e,f){var g,checkbox;if(d&&!b){a.html('<li class="{0}_noresult">{1}</li>'.format(H,c.textNoResult));b=$()}else{if(e)a.append(b);else a.html(b);b=a.children();if(c.firstItemSelectAll)g=a.children(':first').addClass(H+'_checkall');checkbox=b.children('input.'+H+'_listItem_input');if(c.checkbox)checkbox.show()}return{li:b,checkbox:checkbox,selectAll:g}},_setPredictionFromLocalSource:function(a){var b=a.data(H);var c=b.elements;var d=c.prediction;var e=c.listItem.li;var f=c.input.val();if(f==='')d.val(null);else{var g=[];e.filter(':visible').each(function(){g.push($(this).text())});M._predict(f,d,g)}},_predict:function(a,b,c){var d;var e=a.toLowerCase();for(var i=0;i<c.length;i++){var f=c[i].toLowerCase();var g=f.indexOf(e);if(g===-1)continue;g+=e.length;var h=f.indexOf(' ',g);if(g===h)h=f.indexOf(' ',g+1);d=a+(h===-1?f.substr(g):f.substring(g,h));if(d!==a){b.val(d);return false}}},_collapseGroup:function(b){var c=b.data(H);var d=c.elements;var e=c.settings;var f=d.listItem.li;f.filter(function(){var a=$(this);if(a.hasClass(e.selectorChild))return true;if(a.hasClass(e.selectorGroup)){if(M._getLevel(a)>1)return true}}).hide();d.list.find('div.expanded').removeClass('expanded')},_collapse:function(a,b){if(!a.hasClass(b.selectorGroup))return;var c=M._getChildren(a,b.selectorChild);var d=a.children('div.'+H+'_expandable');d.removeClass('expanded');for(var i=0;i<c.length;i++)c[i].hide()},_expand:function(a,b){if(!a.hasClass(b.selectorGroup))return;var c=M._getDirectChildren(a,b.selectorChild,b.selectorGroup);var d=a.children('div.'+H+'_expandable');d.addClass('expanded');for(var i=0;i<c.length;i++){c[i].show();if(c[i].hasClass(b.selectorGroup))c[i].children('div.expanded').removeClass('expanded')}},_getUniqueArray:function(b){var u={},a=[],val;for(var i=0;i<b.length;i++){val=b[i];if(u.hasOwnProperty(val))continue;a.push(val);u[val]=1}return a},_registerMenuStyle:function(b){var c=b.data(H);var d=c.settings;var e=d.menuStyle.fixedPositionContainer;var f=d.menuStyle.scrollSpyContainer;if(d.menuStyle.fixedPosition){if(e==='window')e=F;b.data('originalPosition',c.elements.wrapper.offset());$(e).on('scroll.'+H,function(){M._handleFixedMenu(b)})}var g=[];c.elements.listItem.li.each(function(){var a=$(this).find('a').attr('href');if(!/^#/.test(a))return;a=$(a);if(a.length)g.push({source:$(this),target:a,position:a.offset().top})});if(g.length){b.data('anchor',g);if(f==='window')f=F;$(f).on('scroll.'+H,function(){M._handleScrollSpy(b)})}},_handleFixedMenu:function(a){var b=a.data(H);var c=b.settings;var d=c.menuStyle;var e=d.fixedPositionContainer;var f,container_scroll;if(e==='window'){f=$('body').offset().top;container_scroll=$(F).scrollTop()}else{f=$(e).offset().top;container_scroll=$(e).scrollTop()}var g=b.elements.wrapper;var h=a.data('originalPosition');var i=h.top;var j=a.data('placeholder');if(d.fixedPositionOffsetTop>=i-container_scroll-f){if(g.css('position')!=='fixed'){g.css({position:'fixed',top:i-container_scroll}).animate({top:d.fixedPositionOffsetTop+f},'fast');j=$('<div>').attr('class',H+'_menustyle_placeholder').css({width:g.outerWidth(),height:g.outerHeight()});a.data('placeholder',j);g.after(j)}}else{if(g.css('position')==='fixed'){g.css({position:'static'});j.remove();a.removeData('placeholder')}}},_handleScrollSpy:function(b){var c=b.data(H);var d=c.settings;var e=d.menuStyle;var f=b.data('anchor');var g=e.scrollSpyContainer;var h,container_scroll;if(g==='window'){h=0;container_scroll=$(F).scrollTop()}else{h=$(g).offset().top;container_scroll=$(g).scrollTop()}f=$.extend([],true,f);var a;while(a=f.pop()){if(e.scrollSpyOffsetTop>=a.position-container_scroll-h){var j=a.source;if(e.onScrollSpyActivate){if(e.onScrollSpyActivate(j)===false)return}c.elements.listItem.li.removeClass('selected');j.addClass('selected');M._collapseGroup(b);M._expand(a.source,d);var k=M._getParents(a.source,d.selectorChild,d.selectorGroup);if(k.length){for(var i=0;i<k.length;i++){k[i].addClass('selected');M._expand(k[i],d)}}a.source.show();break}}}};$.fn.jAutochecklist=function(a){if(M[a]){if(a.substr(0,1)==='_')$.error('Method '+a+' does not exist on jQuery.'+H);return M[a].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof a==='object'||!a){return M.init.apply(this,arguments)}else{$.error('Method '+a+' does not exist on jQuery.'+H)}};var N=$.fn.val;$.fn.val=function(a){var b=this.data(H);if(b){if(a===G)return this.jAutochecklist('get');else return this.jAutochecklist('set',a,true)}return N.apply(this,arguments)}})(jQuery,document,window);